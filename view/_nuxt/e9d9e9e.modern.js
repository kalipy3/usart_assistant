(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{595:function(t,e,n){"use strict";n.d(e,"c",(function(){return R})),n.d(e,"a",(function(){return F})),n.d(e,"u",(function(){return P})),n.d(e,"p",(function(){return U})),n.d(e,"n",(function(){return M})),n.d(e,"f",(function(){return E})),n.d(e,"g",(function(){return B})),n.d(e,"r",(function(){return W})),n.d(e,"i",(function(){return z})),n.d(e,"j",(function(){return H})),n.d(e,"o",(function(){return Q})),n.d(e,"t",(function(){return X})),n.d(e,"d",(function(){return Z})),n.d(e,"e",(function(){return et})),n.d(e,"b",(function(){return ot})),n.d(e,"s",(function(){return at})),n.d(e,"m",(function(){return st})),n.d(e,"l",(function(){return ut})),n.d(e,"k",(function(){return pt})),n.d(e,"q",(function(){return ft})),n.d(e,"h",(function(){return bt}));var o,r,l,c,m,d,h,f,v,y,_,$,I,O,j,C,D,S,w,T,N,x=n(205),k=n(3),J=(n(18),n(20),n(69),n(83));n(304);function R(t,e){return t.mutate({mutation:Object(J.a)(o||(o=Object(x.a)(["\n      mutation ($name: String!) {\n        createTeam(name: $name) {\n          name\n        }\n      }\n    "]))),variables:{name:e}})}function F(t,e,n,o){return t.mutate({mutation:Object(J.a)(r||(r=Object(x.a)(["\n      mutation addTeamMemberByEmail(\n        $userRole: TeamMemberRole!\n        $userEmail: String!\n        $teamID: String!\n      ) {\n        addTeamMemberByEmail(\n          userRole: $userRole\n          userEmail: $userEmail\n          teamID: $teamID\n        ) {\n          role\n        }\n      }\n    "]))),variables:{userRole:e,userEmail:n,teamID:o}})}function P(t,e,n,o){return t.mutate({mutation:Object(J.a)(l||(l=Object(x.a)(["\n      mutation updateTeamMemberRole(\n        $newRole: TeamMemberRole!\n        $userUid: String!\n        $teamID: String!\n      ) {\n        updateTeamMemberRole(\n          newRole: $newRole\n          userUid: $userUid\n          teamID: $teamID\n        ) {\n          role\n        }\n      }\n    "]))),variables:{newRole:n,userUid:e,teamID:o}})}function U(t,e,n){return t.mutate({mutation:Object(J.a)(c||(c=Object(x.a)(["\n      mutation renameTeam($newName: String!, $teamID: String!) {\n        renameTeam(newName: $newName, teamID: $teamID) {\n          id\n        }\n      }\n    "]))),variables:{newName:e,teamID:n}})}function M(t,e,n){return t.mutate({mutation:Object(J.a)(m||(m=Object(x.a)(["\n      mutation removeTeamMember($userUid: String!, $teamID: String!) {\n        removeTeamMember(userUid: $userUid, teamID: $teamID)\n      }\n    "]))),variables:{userUid:e,teamID:n}})}function E(t,e){return A.apply(this,arguments)}function A(){return(A=Object(k.a)((function*(t,e){for(var n;void 0===(n=yield t.mutate({mutation:Object(J.a)(h||(h=Object(x.a)(["\n        mutation ($teamID: String!) {\n          deleteTeam(teamID: $teamID)\n        }\n      "]))),variables:{teamID:e}})););return n}))).apply(this,arguments)}function B(t,e){t.mutate({mutation:Object(J.a)(d||(d=Object(x.a)(["\n      mutation ($teamID: String!) {\n        leaveTeam(teamID: $teamID)\n      }\n    "]))),variables:{teamID:e}})}function W(t,e){return G.apply(this,arguments)}function G(){return(G=Object(k.a)((function*(t,e){for(var n=[],cursor="";;){var o=yield t.query({query:Object(J.a)(f||(f=Object(x.a)(["\n        query rootCollectionsOfTeam($teamID: String!, $cursor: String!) {\n          rootCollectionsOfTeam(teamID: $teamID, cursor: $cursor) {\n            id\n            title\n          }\n        }\n      "]))),variables:{teamID:e,cursor:cursor},fetchPolicy:"no-cache"});if(0===o.data.rootCollectionsOfTeam.length)break;o.data.rootCollectionsOfTeam.forEach((t=>{n.push(t)})),cursor=n[n.length-1].id}return n}))).apply(this,arguments)}function z(t,e){return L.apply(this,arguments)}function L(){return(L=Object(k.a)((function*(t,e){var n=[];return(yield t.query({query:Object(J.a)(v||(v=Object(x.a)(["\n      query getCollectionChildren($collectionID: String!) {\n        collection(collectionID: $collectionID) {\n          children {\n            id\n            title\n          }\n        }\n      }\n    "]))),variables:{collectionID:e},fetchPolicy:"no-cache"})).data.collection.children.forEach((t=>{n.push(t)})),n}))).apply(this,arguments)}function H(t,e){return K.apply(this,arguments)}function K(){return(K=Object(k.a)((function*(t,e){for(var n=[],cursor="";;){var o=yield t.query({query:Object(J.a)(y||(y=Object(x.a)(["\n        query getCollectionRequests($collectionID: String!, $cursor: String) {\n          requestsInCollection(collectionID: $collectionID, cursor: $cursor) {\n            id\n            title\n            request\n          }\n        }\n      "]))),variables:{collectionID:e,cursor:cursor},fetchPolicy:"no-cache"});if(o.data.requestsInCollection.forEach((t=>{n.push(t)})),o.data.requestsInCollection.length<10)break;cursor=n[n.length-1].id}return n}))).apply(this,arguments)}function Q(t,e,n){return V.apply(this,arguments)}function V(){return(V=Object(k.a)((function*(t,title,e){for(var n;void 0===(n=yield t.mutate({mutation:Object(J.a)(_||(_=Object(x.a)(["\n        mutation ($newTitle: String!, $collectionID: String!) {\n          renameCollection(newTitle: $newTitle, collectionID: $collectionID) {\n            id\n          }\n        }\n      "]))),variables:{newTitle:title,collectionID:e}})););return n}))).apply(this,arguments)}function X(t,e,n,o){return Y.apply(this,arguments)}function Y(){return(Y=Object(k.a)((function*(t,e,n,o){for(var r;void 0===(r=yield t.mutate({mutation:Object(J.a)($||($=Object(x.a)(["\n        mutation ($data: UpdateTeamRequestInput!, $requestID: String!) {\n          updateRequest(data: $data, requestID: $requestID) {\n            id\n          }\n        }\n      "]))),variables:{data:{request:JSON.stringify(e),title:n},requestID:o}})););return r}))).apply(this,arguments)}function Z(t,e){return tt.apply(this,arguments)}function tt(){return(tt=Object(k.a)((function*(t,e){for(var n;void 0===(n=yield t.mutate({mutation:Object(J.a)(I||(I=Object(x.a)(["\n        mutation ($collectionID: String!) {\n          deleteCollection(collectionID: $collectionID)\n        }\n      "]))),variables:{collectionID:e}})););return n}))).apply(this,arguments)}function et(t,e){return nt.apply(this,arguments)}function nt(){return(nt=Object(k.a)((function*(t,e){for(var n;void 0===(n=yield t.mutate({mutation:Object(J.a)(O||(O=Object(x.a)(["\n        mutation ($requestID: String!) {\n          deleteRequest(requestID: $requestID)\n        }\n      "]))),variables:{requestID:e}})););return n}))).apply(this,arguments)}function ot(t,e,n){return it.apply(this,arguments)}function it(){return(it=Object(k.a)((function*(t,title,e){for(var n;void 0===(n=yield t.mutate({mutation:Object(J.a)(j||(j=Object(x.a)(["\n        mutation ($title: String!, $teamID: String!) {\n          createRootCollection(title: $title, teamID: $teamID) {\n            id\n          }\n        }\n      "]))),variables:{title:title,teamID:e}})););return n}))).apply(this,arguments)}function at(t,e,n,o,r){return lt.apply(this,arguments)}function lt(){return(lt=Object(k.a)((function*(t,e,title,n,o){yield t.mutate({mutation:Object(J.a)(C||(C=Object(x.a)(["\n      mutation ($data: CreateTeamRequestInput!, $collectionID: String!) {\n        createRequestInCollection(data: $data, collectionID: $collectionID) {\n          collection {\n            id\n            team {\n              id\n              name\n            }\n          }\n        }\n      }\n    "]))),variables:{collectionID:o,data:{teamID:n,title:title,request:e}}})}))).apply(this,arguments)}function st(t,e,n,o){return ct.apply(this,arguments)}function ct(){return(ct=Object(k.a)((function*(t,e,title,n){yield t.mutate({mutation:Object(J.a)(D||(D=Object(x.a)(["\n      mutation updateRequest(\n        $data: UpdateTeamRequestInput!\n        $requestID: String!\n      ) {\n        updateRequest(data: $data, requestID: $requestID) {\n          id\n          title\n        }\n      }\n    "]))),variables:{requestID:n,data:{request:e,title:title}}})}))).apply(this,arguments)}function ut(t,e,n){return mt.apply(this,arguments)}function mt(){return(mt=Object(k.a)((function*(t,e,n){return null!=(yield t.mutate({mutation:Object(J.a)(S||(S=Object(x.a)(["\n      mutation importFromMyCollections(\n        $fbCollectionPath: String!\n        $teamID: String!\n      ) {\n        importCollectionFromUserFirestore(\n          fbCollectionPath: $fbCollectionPath\n          teamID: $teamID\n        ) {\n          id\n          title\n        }\n      }\n    "]))),variables:{fbCollectionPath:e,teamID:n}})).data}))).apply(this,arguments)}function pt(t,e,n){return ht.apply(this,arguments)}function ht(){return(ht=Object(k.a)((function*(t,e,n){return null!=(yield t.mutate({mutation:Object(J.a)(w||(w=Object(x.a)(["\n      mutation importFromJSON($jsonString: String!, $teamID: String!) {\n        importCollectionsFromJSON(jsonString: $jsonString, teamID: $teamID)\n      }\n    "]))),variables:{jsonString:JSON.stringify(e),teamID:n}})).data}))).apply(this,arguments)}function ft(t,e,n){return vt.apply(this,arguments)}function vt(){return(vt=Object(k.a)((function*(t,e,n){return null!=(yield t.mutate({mutation:Object(J.a)(T||(T=Object(x.a)(["\n      mutation replaceWithJSON($jsonString: String!, $teamID: String!) {\n        replaceCollectionsWithJSON(jsonString: $jsonString, teamID: $teamID)\n      }\n    "]))),variables:{jsonString:JSON.stringify(e),teamID:n}})).data}))).apply(this,arguments)}function bt(t,e){return yt.apply(this,arguments)}function yt(){return(yt=Object(k.a)((function*(t,e){return(yield t.query({query:Object(J.a)(N||(N=Object(x.a)(["\n      query exportAsJSON($teamID: String!) {\n        exportCollectionsToJSON(teamID: $teamID)\n      }\n    "]))),variables:{teamID:e}})).data.exportCollectionsToJSON}))).apply(this,arguments)}},727:function(t,e,n){"use strict";n.r(e);var o=n(3),r=(n(74),n(18),n(20),n(49),n(614),n(68),n(306),n(114),n(15)),l=n(595),c=n(50),m={props:{show:Boolean,collectionsType:{type:Object,default:()=>{}}},data:()=>({showJsonCode:!1,mode:"import_export",mySelectedCollectionID:void 0,collectionJson:"",fb:r.a}),subscriptions:()=>({myCollections:c.x}),methods:{createCollectionGist(){var t=this;return Object(o.a)((function*(){yield t.$axios.$post("https://api.github.com/gists",{files:{"hoppscotch-collections.json":{content:t.getJSONCollection()}}},{headers:{Authorization:"token ".concat(r.a.currentUser.accessToken),Accept:"application/vnd.github.v3+json"}}).then((e=>{t.$toast.success(t.$t("gist_created"),{icon:"done"}),window.open(e.html_url)})).catch((e=>{t.$toast.error(t.$t("something_went_wrong"),{icon:"error"}),console.log(e)}))}))()},readCollectionGist(){var t=this;return Object(o.a)((function*(){var e=prompt(t.$t("enter_gist_url"));e&&(yield t.$axios.$get("https://api.github.com/gists/".concat(e.split("/").pop()),{headers:{Accept:"application/vnd.github.v3+json"}}).then((e=>{var{files:n}=e,o=JSON.parse(Object.values(n)[0].content);Object(c.B)(o),t.fileImported()})).catch((e=>{t.failedImport(),console.log(e)})))}))()},hideModal(){this.mode="import_export",this.mySelectedCollectionID=void 0,this.$emit("hide-modal")},openDialogChooseFileToReplaceWith(){this.$refs.inputChooseFileToReplaceWith.click()},openDialogChooseFileToImportFrom(){this.$refs.inputChooseFileToImportFrom.click()},replaceWithJSON(){var t=new FileReader;t.onload=t=>{var{target:e}=t,content=e.result,n=JSON.parse(content);if(n[0])var[o,r,m]=Object.keys(n[0]);else n.info&&n.info.schema.includes("v2.1.0")?n=[this.parsePostmanCollection(n)]:this.failedImport();"team-collections"===this.collectionsType.type?l.q(this.$apollo,n,this.collectionsType.selectedTeam.id).then((t=>{t?this.fileImported():this.failedImport()})).catch((t=>{console.log(t),this.failedImport()})):(Object(c.B)(n),this.fileImported())},t.readAsText(this.$refs.inputChooseFileToReplaceWith.files[0]),this.$refs.inputChooseFileToReplaceWith.value=""},importFromJSON(){var t=new FileReader;t.onload=t=>{var{target:e}=t,content=e.result,n=JSON.parse(content);if(n[0])var[o,r,m]=Object.keys(n[0]);else{if(!n.info||!n.info.schema.includes("v2.1.0"))return void this.failedImport();n=JSON.parse(content.replaceAll(/{{([a-z]+)}}/gi,"<<$1>>")),n=[this.parsePostmanCollection(n)]}"team-collections"===this.collectionsType.type?l.k(this.$apollo,n,this.collectionsType.selectedTeam.id).then((t=>{t?(this.$emit("update-team-collections"),this.fileImported()):this.failedImport()})).catch((t=>{console.log(t),this.failedImport()})):(Object(c.f)(n),this.fileImported())},t.readAsText(this.$refs.inputChooseFileToImportFrom.files[0]),this.$refs.inputChooseFileToImportFrom.value=""},importFromMyCollections(){l.l(this.$apollo,this.mySelectedCollectionID,this.collectionsType.selectedTeam.id).then((t=>{t?(this.fileImported(),this.$emit("update-team-collections")):this.failedImport()})).catch((t=>{console.log(t),this.failedImport()}))},getJSONCollection(){var t=this;return Object(o.a)((function*(){return"my-collections"===t.collectionsType.type?t.collectionJson=JSON.stringify(t.myCollections,null,2):t.collectionJson=yield l.h(t.$apollo,t.collectionsType.selectedTeam.id),t.collectionJson}))()},exportJSON(){var text=this.collectionJson;text=text.replace(/\n/g,"\r\n");var t=new Blob([text],{type:"text/json"}),e=document.createElement("a");e.download="hoppscotch-collection.json",e.href=window.URL.createObjectURL(t),e.target="_blank",e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),this.$toast.success(this.$t("download_started"),{icon:"done"})},fileImported(){this.$toast.info(this.$t("file_imported"),{icon:"folder_shared"})},failedImport(){this.$toast.error(this.$t("import_failed"),{icon:"error"})},parsePostmanCollection(t){var{info:e,name:n,item:o}=t,r={name:"",folders:[],requests:[]};if(r.name=e?e.name:n,o&&o.length>0)for(var l of o)l.request?Object.prototype.hasOwnProperty.call(r,"folders")?(r.name=e?e.name:n,r.requests.push(this.parsePostmanRequest(l))):(r.name=n||"",r.requests.push(this.parsePostmanRequest(l))):this.hasFolder(l)?r.folders.push(this.parsePostmanCollection(l)):r.requests.push(this.parsePostmanRequest(l));return r},parsePostmanRequest(t){var{name:e,request:n}=t,o={url:"",path:"",method:"",auth:"",httpUser:"",httpPassword:"",passwordFieldType:"password",bearerToken:"",headers:[],params:[],bodyParams:[],rawParams:"",rawInput:!1,contentType:"",requestType:"",name:""};if(o.name=e,n.url){var r=n.url.raw.match(/^(.+:\/\/[^/]+|{[^/]+})(\/[^?]+|).*$/);r&&(o.url=r[1],o.path=r[2]?r[2]:"")}o.method=n.method;var l=n.auth?n.auth:"",c=l?l.type:"";"basic"===c?(o.auth="Basic Auth",o.httpUser="username"===l.basic[0].key?l.basic[0].value:l.basic[1].value,o.httpPassword="password"===l.basic[0].key?l.basic[0].value:l.basic[1].value):"oauth2"===c?(o.auth="OAuth 2.0",o.bearerToken="accessToken"===l.oauth2[0].key?l.oauth2[0].value:l.oauth2[1].value):"bearer"===c&&(o.auth="Bearer Token",o.bearerToken=l.bearer[0].value);var m=n.header;if(m)for(var header of(o.headers=m,o.headers))delete header.name,delete header.type;if(n.url){var d=n.url.query;if(d)for(var param of(o.params=d,o.params))delete param.disabled}if(n.body)if("urlencoded"===n.body.mode){var h=n.body.urlencoded;for(var f of(o.bodyParams=h||[],o.bodyParams))delete f.type}else"raw"===n.body.mode&&(o.rawInput=!0,o.rawParams=n.body.raw);return o},hasFolder:t=>Object.prototype.hasOwnProperty.call(t,"item")}},d=n(12),component=Object(d.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("SmartModal",{on:{close:t.hideModal}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("div",{staticClass:"row-wrapper"},[n("h3",{staticClass:"title"},[t._v(t._s(t.$t("import_export"))+" "+t._s(t.$t("collections")))]),t._v(" "),n("div",["import_export"!=t.mode?n("button",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:"Back",expression:"'Back'",modifiers:{left:!0}}],staticClass:"tooltip-target icon",on:{click:function(e){t.mode="import_export"}}},[n("i",{staticClass:"material-icons"},[t._v("arrow_back")])]):t._e(),t._v(" "),"import_export"==t.mode&&"my-collections"==t.collectionsType.type?n("v-popover",[n("button",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:t.$t("more"),expression:"$t('more')",modifiers:{left:!0}}],staticClass:"tooltip-target icon"},[n("i",{staticClass:"material-icons"},[t._v("more_vert")])]),t._v(" "),n("template",{slot:"popover"},[n("div",[n("button",{directives:[{name:"close-popover",rawName:"v-close-popover"}],staticClass:"icon",on:{click:t.readCollectionGist}},[n("i",{staticClass:"material-icons"},[t._v("assignment_returned")]),t._v(" "),n("span",[t._v(t._s(t.$t("import_from_gist")))])])]),t._v(" "),n("div",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:{content:t.fb.currentUser?"github.com"!==t.fb.currentUser.provider?t.$t("login_with_github_to")+t.$t("create_secret_gist"):null:t.$t("login_with_github_to")+t.$t("create_secret_gist")},expression:"{\n                content: !fb.currentUser\n                  ? $t('login_with_github_to') + $t('create_secret_gist')\n                  : fb.currentUser.provider !== 'github.com'\n                  ? $t('login_with_github_to') + $t('create_secret_gist')\n                  : null,\n              }",modifiers:{bottom:!0}}]},[n("button",{directives:[{name:"close-popover",rawName:"v-close-popover"}],staticClass:"icon",attrs:{disabled:!t.fb.currentUser||"github.com"!==t.fb.currentUser.provider},on:{click:t.createCollectionGist}},[n("i",{staticClass:"material-icons"},[t._v("assignment_turned_in")]),t._v(" "),n("span",[t._v(t._s(t.$t("create_secret_gist")))])])])])],2):t._e(),t._v(" "),n("button",{staticClass:"icon",on:{click:t.hideModal}},[n("i",{staticClass:"material-icons"},[t._v("close")])])],1)])]),t._v(" "),n("div",{staticClass:"flex flex-col",attrs:{slot:"body"},slot:"body"},["import_export"==t.mode?n("div",{staticClass:"flex flex-col items-start p-2"},[n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("replace_current"),expression:"$t('replace_current')"}],staticClass:"icon",on:{click:t.openDialogChooseFileToReplaceWith}},[n("i",{staticClass:"material-icons"},[t._v("create_new_folder")]),t._v(" "),n("span",[t._v(t._s(t.$t("replace_json")))]),t._v(" "),n("input",{ref:"inputChooseFileToReplaceWith",staticStyle:{display:"none"},attrs:{type:"file",accept:"application/json"},on:{change:t.replaceWithJSON}})]),t._v(" "),n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("preserve_current"),expression:"$t('preserve_current')"}],staticClass:"icon",on:{click:t.openDialogChooseFileToImportFrom}},[n("i",{staticClass:"material-icons"},[t._v("folder_special")]),t._v(" "),n("span",[t._v(t._s(t.$t("import_json")))]),t._v(" "),n("input",{ref:"inputChooseFileToImportFrom",staticStyle:{display:"none"},attrs:{type:"file",accept:"application/json"},on:{change:t.importFromJSON}})]),t._v(" "),"team-collections"==t.collectionsType.type?n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("replace_current"),expression:"$t('replace_current')"}],staticClass:"icon",on:{click:function(e){t.mode="import_from_my_collections"}}},[n("i",{staticClass:"material-icons"},[t._v("folder_special")]),t._v(" "),n("span",[t._v(t._s("Import from My Collections"))])]):t._e(),t._v(" "),n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("show_code"),expression:"$t('show_code')"}],staticClass:"icon",on:{click:function(){t.mode="export_as_json",t.getJSONCollection()}}},[n("i",{staticClass:"material-icons"},[t._v("folder_special")]),t._v(" "),n("span",[t._v(t._s("Export As JSON"))])])]):t._e(),t._v(" "),"import_from_my_collections"==t.mode?n("div",[n("span",{staticClass:"select-wrapper"},[n("select",{attrs:{type:"text",autofocus:""},on:{change:function(e){t.mySelectedCollectionID=e.target.value}}},[n("option",{key:void 0,attrs:{hidden:"",disabled:"",selected:""},domProps:{value:void 0}},[t._v("\n            Select Collection\n          ")]),t._v(" "),t._l(t.myCollections,(function(e,o){return n("option",{key:o,domProps:{value:o}},[t._v("\n            "+t._s(e.name)+"\n          ")])}))],2)]),t._v(" "),n("button",{staticClass:"m-2 icon primary",attrs:{disabled:null==t.mySelectedCollectionID},on:{click:t.importFromMyCollections}},[t._v("\n        "+t._s(t.$t("import"))+"\n      ")])]):t._e(),t._v(" "),"export_as_json"==t.mode?n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.collectionJson,expression:"collectionJson"}],attrs:{rows:"8",readonly:""},domProps:{value:t.collectionJson},on:{input:function(e){e.target.composing||(t.collectionJson=e.target.value)}}}),t._v(" "),n("div",{staticClass:"row-wrapper"},[n("span",{staticClass:"m-2"},[n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("download_file"),expression:"$t('download_file')"}],staticClass:"icon primary",on:{click:t.exportJSON}},[t._v("\n            "+t._s(t.$t("export"))+"\n          ")])])])]):t._e()])]):t._e()}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{SmartModal:n(150).default})}}]);