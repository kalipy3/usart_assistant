(window.webpackJsonp=window.webpackJsonp||[]).push([[52,91],{664:function(t,e,o){var content=o(675);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(64).default)("f3a622c6",content,!0,{sourceMap:!1})},668:function(t,e,o){var n=o(9),r=o(362).values;n({target:"Object",stat:!0},{values:function(t){return r(t)}})},673:function(t,e,o){"use strict";o.r(e);var n={props:{on:{type:Boolean,default:!1}},methods:{toggle:function(){var t=this.$refs.toggle.classList.toggle("on");this.$emit("change",t)}}},r=(o(674),o(16)),component=Object(r.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"inline-block cursor-pointer",on:{click:function(e){return t.toggle()}}},[o("label",{ref:"toggle",staticClass:"toggle",class:{on:t.on}},[o("span",{staticClass:"handle"})]),t._v(" "),o("label",{staticClass:"pl-0 align-middle cursor-pointer"},[t._t("default")],2)])}),[],!1,null,"795572da",null);e.default=component.exports},674:function(t,e,o){"use strict";o(664)},675:function(t,e,o){var n=o(63)((function(i){return i[1]}));n.push([t.i,".toggle[data-v-795572da]{position:relative;display:inline-block;vertical-align:middle;border-radius:9999px;padding:0px;margin:1rem;cursor:pointer;flex-shrink:0;width:32px;height:16px;border:none;background-color:var(--fg-light-color);box-sizing:initial}.toggle[data-v-795572da],.toggle .handle[data-v-795572da]{transition:all .2s ease-in-out}.toggle .handle[data-v-795572da]{position:absolute;display:inline-block;top:0px;right:0px;bottom:0px;left:0px;border-radius:9999px;pointer-events:none;margin:4px;background-color:var(--bg-color);width:8px;height:8px}.toggle.on[data-v-795572da]{background-color:var(--ac-color);border-color:var(--ac-color)}.toggle.on .handle[data-v-795572da]{background-color:var(--act-color);left:16px}",""]),t.exports=n},816:function(t,e,o){"use strict";o.r(e);var n=o(3),r=(o(56),o(101),o(668),o(33),o(17),o(29),o(27),o(93),o(35),o(360),o(30),o(18)),c=o(39),l={props:{show:Boolean},data:function(){return{fb:r.a,showJsonCode:!1}},subscriptions:function(){return{SYNC_ENVIRONMENTS:Object(c.e)("syncEnvironments")}},computed:{environmentJson:function(){return JSON.stringify(this.$store.state.postwoman.environments,null,2)}},methods:{createEnvironmentGist:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$post("https://api.github.com/gists",{files:{"hoppscotch-environments.json":{content:t.environmentJson}}},{headers:{Authorization:"token ".concat(r.a.currentUser.accessToken),Accept:"application/vnd.github.v3+json"}}).then((function(e){t.$toast.success(t.$t("gist_created"),{icon:"done"}),window.open(e.html_url)})).catch((function(e){t.$toast.error(t.$t("something_went_wrong"),{icon:"error"}),console.log(e)}));case 2:case"end":return e.stop()}}),e)})))()},readEnvironmentGist:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=prompt(t.$t("enter_gist_url"))){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t.$axios.$get("https://api.github.com/gists/".concat(o.split("/").pop()),{headers:{Accept:"application/vnd.github.v3+json"}}).then((function(e){var o=e.files,n=JSON.parse(Object.values(o)[0].content);t.$store.commit("postwoman/replaceEnvironments",n),t.fileImported(),t.syncToFBEnvironments()})).catch((function(e){t.failedImport(),console.log(e)}));case 5:case"end":return e.stop()}}),e)})))()},hideModal:function(){this.$emit("hide-modal")},openDialogChooseFileToReplaceWith:function(){this.$refs.inputChooseFileToReplaceWith.click()},openDialogChooseFileToImportFrom:function(){this.$refs.inputChooseFileToImportFrom.click()},replaceWithJSON:function(){var t=this,e=new FileReader;e.onload=function(e){var content=e.target.result,o=JSON.parse(content);t.$store.commit("postwoman/replaceEnvironments",o)},e.readAsText(this.$refs.inputChooseFileToReplaceWith.files[0]),this.fileImported(),this.syncToFBEnvironments(),this.$refs.inputChooseFileToReplaceWith.value=""},importFromJSON:function(){var t=this,e=new FileReader;e.onload=function(e){var content=e.target.result,o=JSON.parse(content);"environment"===o._postman_variable_scope||"globals"===o._postman_variable_scope?t.importFromPostman(o):t.importFromPostwoman(o)},e.readAsText(this.$refs.inputChooseFileToImportFrom.files[0]),this.syncToFBEnvironments(),this.$refs.inputChooseFileToImportFrom.value=""},importFromPostwoman:function(t){var e=this.$t("file_imported");this.$store.commit("postwoman/importAddEnvironments",{environments:t,confirmation:e})},importFromPostman:function(t){var e=t.name,o=t.values,n={name:e,variables:[]};o.forEach((function(t){var e=t.key,o=t.value;return n.variables.push({key:e,value:o})}));var r=[n];this.importFromPostwoman(r)},exportJSON:function(){var text=this.environmentJson;text=text.replace(/\n/g,"\r\n");var t=new Blob([text],{type:"text/json"}),e=document.createElement("a");e.download="hoppscotch-environment.json",e.href=window.URL.createObjectURL(t),e.target="_blank",e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),this.$toast.success(this.$t("download_started"),{icon:"done"})},syncEnvironments:function(){this.$store.commit("postwoman/replaceEnvironments",r.a.currentEnvironments),this.fileImported()},syncToFBEnvironments:function(){null!==r.a.currentUser&&this.SYNC_ENVIRONMENTS&&r.a.writeEnvironments(JSON.parse(JSON.stringify(this.$store.state.postwoman.environments)))},fileImported:function(){this.$toast.info(this.$t("file_imported"),{icon:"folder_shared"})}}},m=o(16),component=Object(m.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.show?o("SmartModal",{on:{close:t.hideModal}},[o("div",{attrs:{slot:"header"},slot:"header"},[o("div",{staticClass:"row-wrapper"},[o("h3",{staticClass:"title"},[t._v("\n        "+t._s(t.$t("import_export"))+" "+t._s(t.$t("environments"))+"\n      ")]),t._v(" "),o("div",[o("v-popover",[o("button",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:t.$t("more"),expression:"$t('more')",modifiers:{left:!0}}],staticClass:"tooltip-target icon"},[o("i",{staticClass:"material-icons"},[t._v("more_vert")])]),t._v(" "),o("template",{slot:"popover"},[o("div",[o("button",{directives:[{name:"close-popover",rawName:"v-close-popover"}],staticClass:"icon",on:{click:t.readEnvironmentGist}},[o("i",{staticClass:"material-icons"},[t._v("assignment_returned")]),t._v(" "),o("span",[t._v(t._s(t.$t("import_from_gist")))])])]),t._v(" "),o("div",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:{content:t.fb.currentUser?"github.com"!==t.fb.currentUser.provider?t.$t("login_with_github_to")+t.$t("create_secret_gist"):null:t.$t("login_with_github_to")+t.$t("create_secret_gist")},expression:"{\n                content: !fb.currentUser\n                  ? $t('login_with_github_to') + $t('create_secret_gist')\n                  : fb.currentUser.provider !== 'github.com'\n                  ? $t('login_with_github_to') + $t('create_secret_gist')\n                  : null,\n              }",modifiers:{bottom:!0}}]},[o("button",{directives:[{name:"close-popover",rawName:"v-close-popover"}],staticClass:"icon",attrs:{disabled:!t.fb.currentUser||"github.com"!==t.fb.currentUser.provider},on:{click:t.createEnvironmentGist}},[o("i",{staticClass:"material-icons"},[t._v("assignment_turned_in")]),t._v(" "),o("span",[t._v(t._s(t.$t("create_secret_gist")))])])])])],2),t._v(" "),o("button",{staticClass:"icon",on:{click:t.hideModal}},[o("i",{staticClass:"material-icons"},[t._v("close")])])],1)])]),t._v(" "),o("div",{staticClass:"flex flex-col",attrs:{slot:"body"},slot:"body"},[o("div",{staticClass:"flex flex-col items-start p-2"},[o("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:t.fb.currentUser?t.$t("replace_current"):t.$t("login_first")},expression:"{\n          content: !fb.currentUser\n            ? $t('login_first')\n            : $t('replace_current'),\n        }"}]},[o("button",{staticClass:"icon",attrs:{disabled:!t.fb.currentUser},on:{click:t.syncEnvironments}},[o("i",{staticClass:"material-icons"},[t._v("folder_shared")]),t._v(" "),o("span",[t._v(t._s(t.$t("import_from_sync")))])])]),t._v(" "),o("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("replace_current"),expression:"$t('replace_current')"}],staticClass:"icon",on:{click:t.openDialogChooseFileToReplaceWith}},[o("i",{staticClass:"material-icons"},[t._v("create_new_folder")]),t._v(" "),o("span",[t._v(t._s(t.$t("replace_json")))]),t._v(" "),o("input",{ref:"inputChooseFileToReplaceWith",staticStyle:{display:"none"},attrs:{type:"file",accept:"application/json"},on:{change:t.replaceWithJSON}})]),t._v(" "),o("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("preserve_current"),expression:"$t('preserve_current')"}],staticClass:"icon",on:{click:t.openDialogChooseFileToImportFrom}},[o("i",{staticClass:"material-icons"},[t._v("folder_special")]),t._v(" "),o("span",[t._v(t._s(t.$t("import_json")))]),t._v(" "),o("input",{ref:"inputChooseFileToImportFrom",staticStyle:{display:"none"},attrs:{type:"file",accept:"application/json"},on:{change:t.importFromJSON}})])]),t._v(" "),t.showJsonCode?o("div",{staticClass:"row-wrapper"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.environmentJson,expression:"environmentJson"}],attrs:{rows:"8",readonly:""},domProps:{value:t.environmentJson},on:{input:function(e){e.target.composing||(t.environmentJson=e.target.value)}}})]):t._e()]),t._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("div",{staticClass:"row-wrapper"},[o("span",[o("SmartToggle",{attrs:{on:t.showJsonCode},on:{change:function(e){t.showJsonCode=e}}},[t._v("\n          "+t._s(t.$t("show_code"))+"\n        ")])],1),t._v(" "),o("span",[o("button",{staticClass:"icon",on:{click:t.hideModal}},[t._v("\n          "+t._s(t.$t("cancel"))+"\n        ")]),t._v(" "),o("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.$t("download_file"),expression:"$t('download_file')"}],staticClass:"icon primary",on:{click:t.exportJSON}},[t._v("\n          "+t._s(t.$t("export"))+"\n        ")])])])])]):t._e()}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{SmartToggle:o(673).default,SmartModal:o(192).default})}}]);